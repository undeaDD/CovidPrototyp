function signout(){firebase.auth().signOut()}function snapshotToArray(a){var e=[];return a.forEach(function(a){var t=a.val();t.id=a.key,e.push(t)}),e}function createEntry(){firebase.database().ref("cavities").once("value").then(a=>{var e=0;a.forEach(function(a){const t=parseInt(a.key);console.log(t),e=e<t?t:e}),console.log(e),firebase.database().ref("cavities/"+(e+1)).set({status:"In Bearbeitung",date4:(new Date).toLocaleDateString(),count:0})})}function removeEntry(a){confirm("Soll der Eintrag wirklich gelöscht werden?")&&firebase.database().ref(a).remove()}firebase.initializeApp({apiKey:"AIzaSyAKzR5AiJVZ3Iz5tJrWsLeBVDZJl2SSqLE",authDomain:"coronaprototyp.firebaseapp.com",databaseURL:"https://coronaprototyp.firebaseio.com",projectId:"coronaprototyp",storageBucket:"coronaprototyp.appspot.com",messagingSenderId:"857488715212",appId:"1:857488715212:web:763e73804d890e4bf40169"}),$(function(){$(window).resize(function(){$("#table3").DataTable().columns.adjust().draw(),$("#table3").DataTable().fixedHeader.adjust().draw()}),firebase.auth().onAuthStateChanged(function(a){a?(document.body.classList.remove("d-none"),firebase.database().ref("cavities").on("value",function(a){var e=snapshotToArray(a),t=$("#table3").DataTable({dom:"<'row'<'col-6 'B><'col-6'f>><'row'<'col-sm-12'tr>>",blurable:!1,destroy:!0,paging:!1,ordering:!0,info:!1,keys:!1,searching:!0,fixedHeader:!0,scrollX:!0,autoWidth:!1,order:[[1,"desc"]],language:{search:"",searchPlaceholder:"Nach Plan suchen",emptyTable:"Keine Kavitätenpläne vorhanden"},buttons:[{text:"<img height='21' class='mr-2' style='margin-top: -4px;' src='../assets/img/file-plus.png'/>Neuer Kavitätenplan",action:function(a,e,t,r){createEntry()},className:"customButton mr-2"}],columnDefs:[{width:"80px",targets:0}],columns:[{data:"actions",defaultContent:"",orderable:!1,searchable:!1,render:function(a,e,t,r){return"<a><img class='mr-2' height='21' src='../assets/img/pencil.png'/></a><a><img class='mr-2' height='21' src='../assets/img/vial.png'/></a><a onclick='removeEntry(\"cavities/"+t.id+"\")'><img height='21' src='../assets/img/trash.png'/></a>"}},{data:"id",className:"bold",orderable:!0,searchable:!0},{data:"status",defaultContent:"In Bearbeitung",orderable:!0,searchable:!0},{data:"date4",defaultContent:"-",orderable:!0,searchable:!0},{data:"count",defaultContent:"0",orderable:!0,searchable:!0}],data:e});t.columns.adjust().draw(),t.fixedHeader.adjust().draw(),$("#count3").text(t.data().count())}),firebase.database().ref("patients").on("value",function(a){var e=snapshotToArray(a),t=$("#table4").DataTable({dom:"<'row'<'col-6 'B><'col-6'f>><'row'<'col-sm-12'tr>>",blurable:!1,destroy:!0,paging:!1,ordering:!0,info:!1,keys:!1,searching:!0,fixedHeader:!0,scrollX:!0,autoWidth:!1,order:[[1,"desc"]],language:{search:"",searchPlaceholder:"Nach Eintrag suchen",emptyTable:"Keine Einträge vorhanden"},buttons:[],columns:[{data:"id",className:"bold",orderable:!0},{data:"poolid",defaultContent:"-",orderable:!1,searchable:!0},{data:"lname",orderable:!1},{data:"fname",orderable:!1}],data:e});t.columns.adjust().draw(),t.fixedHeader.adjust().draw()})):(firebase.auth().signOut(),window.location.href="login.html")})});
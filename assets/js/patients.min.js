function snapshotToArray(a){var e=[];return a.forEach(function(a){var t=a.val();t.id=a.key,e.push(t)}),e}firebase.initializeApp({apiKey:"AIzaSyAKzR5AiJVZ3Iz5tJrWsLeBVDZJl2SSqLE",authDomain:"coronaprototyp.firebaseapp.com",databaseURL:"https://coronaprototyp.firebaseio.com",projectId:"coronaprototyp",storageBucket:"coronaprototyp.appspot.com",messagingSenderId:"857488715212",appId:"1:857488715212:web:763e73804d890e4bf40169"}),$(function(){$(window).resize(function(){$("#table1").DataTable().columns.adjust().draw(),$("#table1").DataTable().fixedHeader.adjust().draw(),$("#table2").DataTable().columns.adjust().draw(),$("#table2").DataTable().fixedHeader.adjust().draw()}),firebase.auth().onAuthStateChanged(function(a){a?(document.body.classList.remove("d-none"),firebase.database().ref("requests").on("value",function(a){var e=snapshotToArray(a),t=[],n=1;for(const a of e){var r=[];switch(a.morepatients){case"4":r.push({id:n+".5",lname:a.p5_lastname,fname:a.p5_firstname,street:a.p5_street,plz:a.p5_zip,city:a.p5_address,birthday:a.p5_birthdate,tel:a.p5_telephone,mobile:a.p5_mobile,fax:a.p5_fax,email:a.p5_email,emailCopy:a.p5_emailcopy,date1:a.insertDate});case"3":r.push({id:n+".4",lname:a.p4_lastname,fname:a.p4_firstname,street:a.p4_street,plz:a.p4_zip,city:a.p4_address,birthday:a.p4_birthdate,tel:a.p4_telephone,mobile:a.p4_mobile,fax:a.p4_fax,email:a.p4_email,emailCopy:a.p4_emailcopy,date1:a.insertDate});case"2":r.push({id:n+".3",lname:a.p3_lastname,fname:a.p3_firstname,street:a.p3_street,plz:a.p3_zip,city:a.p3_address,birthday:a.p3_birthdate,tel:a.p3_telephone,mobile:a.p3_mobile,fax:a.p3_fax,email:a.p3_email,emailCopy:a.p3_emailcopy,date1:a.insertDate});case"1":r.push({id:n+".2",lname:a.p2_lastname,fname:a.p2_firstname,street:a.p2_street,plz:a.p2_zip,city:a.p2_address,birthday:a.p2_birthdate,tel:a.p2_telephone,mobile:a.p2_mobile,fax:a.p2_fax,email:a.p2_email,emailCopy:a.p2_emailcopy,date1:a.insertDate});default:r.push({id:n+".1",lname:a.p1_lastname,fname:a.p1_firstname,street:a.p1_street,plz:a.p1_zip,city:a.p1_address,birthday:a.p1_birthdate,tel:a.p1_telephone,mobile:a.p1_mobile,fax:a.p1_fax,email:a.p1_email,emailCopy:a.p1_emailcopy,date1:a.insertDate})}t.push(...r.reverse()),n+=1}var d=$("#table1").DataTable({destroy:!0,paging:!1,ordering:!1,info:!1,keys:!0,searching:!0,fixedHeader:!0,scrollX:!0,autoWidth:!1,language:{search:"",searchPlaceholder:"Nach Eintrag suchen",emptyTable:"Keine Einträge vorhanden"},columns:[{data:"id",className:"bold"},{data:"lname"},{data:"fname"},{data:"street"},{data:"plz"},{data:"city"},{data:"birthday"},{data:"tel",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&void 0!==a?'<a href="tel:'+a+'">'+a+"</a>":'<span class="text-center">'+a+"</span>"}},{data:"mobile",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&void 0!==a?'<a href="tel:'+a+'">'+a+"</a>":a}},{data:"fax",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&void 0!==a?'<a href="fax:'+a+'">'+a+"</a>":a}},{data:"email",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&void 0!==a?'<a href="mailto:'+a+'">'+a+"</a>":a}},{data:"emailCopy",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&void 0!==a?'<a href="mailto:'+a+'">'+a+"</a>":a}},{data:"date1",defaultContent:"-"}],data:t});d.columns.adjust().draw(),d.fixedHeader.adjust().draw()}),firebase.database().ref("patients").on("value",function(a){var e=snapshotToArray(a),t=$("#table2").DataTable({destroy:!0,paging:!1,ordering:!1,info:!1,keys:!0,searching:!0,fixedHeader:!0,scrollX:!0,autoWidth:!1,language:{search:"",searchPlaceholder:"Nach Eintrag suchen",emptyTable:"Keine Einträge vorhanden"},columns:[{data:"id",className:"bold"},{data:"lname"},{data:"fname"},{data:"street"},{data:"plz"},{data:"city"},{data:"birthday"},{data:"tel",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&"-"!=a?'<a href="tel:'+a+'">'+a+"</a>":'<span class="text-center">'+a+"</span>"}},{data:"mobile",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&"-"!=a?'<a href="tel:'+a+'">'+a+"</a>":a}},{data:"fax",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&"-"!=a?'<a href="fax:'+a+'">'+a+"</a>":a}},{data:"email",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&"-"!=a?'<a href="mailto:'+a+'">'+a+"</a>":a}},{data:"emailCopy",defaultContent:"-",render:function(a,e,t,n){return"display"===e&&"-"!=a?'<a href="mailto:'+a+'">'+a+"</a>":a}},{data:"date1",defaultContent:"-"},{data:"date2",defaultContent:"-"},{data:"date3",defaultContent:"-"}],data:e});t.columns.adjust().draw(),t.fixedHeader.adjust().draw()})):(firebase.auth().signOut(),window.location.href="einsendeschein.html")})});
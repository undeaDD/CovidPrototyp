function snapshotToArray(e){var a=[];return e.forEach(function(e){var t=e.val();t.id=e.key,a.push(t)}),a}firebase.initializeApp({apiKey:"AIzaSyAKzR5AiJVZ3Iz5tJrWsLeBVDZJl2SSqLE",authDomain:"coronaprototyp.firebaseapp.com",databaseURL:"https://coronaprototyp.firebaseio.com",projectId:"coronaprototyp",storageBucket:"coronaprototyp.appspot.com",messagingSenderId:"857488715212",appId:"1:857488715212:web:763e73804d890e4bf40169"}),$(document).on("click",'[data-toggle="lightbox"]',function(e){e.preventDefault(),$(this).ekkoLightbox({alwaysShowClose:!0})}),$(function(){$(window).resize(function(){$("#table1").DataTable().columns.adjust().draw(),$("#table1").DataTable().fixedHeader.adjust().draw(),$("#table2").DataTable().columns.adjust().draw(),$("#table2").DataTable().fixedHeader.adjust().draw()}),firebase.auth().onAuthStateChanged(function(e){e?(document.body.classList.remove("d-none"),firebase.database().ref("requests").on("value",function(e){var a=snapshotToArray(e),t=[],r=1;for(const e of a){var o=[];switch(e.morepatients){case"4":o.push({id:r+".5",lname:e.p5_lastname,fname:e.p5_firstname,street:e.p5_street,plz:e.p5_zip,city:e.p5_address,birthday:e.p5_birthdate,tel:e.p5_telephone,mobile:e.p5_mobile,fax:e.p5_fax,email:e.p5_email,emailCopy:e.p5_emailcopy,date1:e.insertDate,front:e.p5_front,back:e.p5_back});case"3":o.push({id:r+".4",lname:e.p4_lastname,fname:e.p4_firstname,street:e.p4_street,plz:e.p4_zip,city:e.p4_address,birthday:e.p4_birthdate,tel:e.p4_telephone,mobile:e.p4_mobile,fax:e.p4_fax,email:e.p4_email,emailCopy:e.p4_emailcopy,date1:e.insertDate,front:e.p4_front,back:e.p4_back});case"2":o.push({id:r+".3",lname:e.p3_lastname,fname:e.p3_firstname,street:e.p3_street,plz:e.p3_zip,city:e.p3_address,birthday:e.p3_birthdate,tel:e.p3_telephone,mobile:e.p3_mobile,fax:e.p3_fax,email:e.p3_email,emailCopy:e.p3_emailcopy,date1:e.insertDate,front:e.p3_front,back:e.p3_back});case"1":o.push({id:r+".2",lname:e.p2_lastname,fname:e.p2_firstname,street:e.p2_street,plz:e.p2_zip,city:e.p2_address,birthday:e.p2_birthdate,tel:e.p2_telephone,mobile:e.p2_mobile,fax:e.p2_fax,email:e.p2_email,emailCopy:e.p2_emailcopy,date1:e.insertDate,front:e.p2_front,back:e.p2_back});default:o.push({id:r+".1",lname:e.p1_lastname,fname:e.p1_firstname,street:e.p1_street,plz:e.p1_zip,city:e.p1_address,birthday:e.p1_birthdate,tel:e.p1_telephone,mobile:e.p1_mobile,fax:e.p1_fax,email:e.p1_email,emailCopy:e.p1_emailcopy,date1:e.insertDate,front:e.p1_front,back:e.p1_back,signature:e.signature})}t.push(...o.reverse()),r+=1}var n=$("#table1").DataTable({dom:"<'row'<'col-6 'B><'col-6'f>><'row'<'col-sm-12'tr>>",blurable:!1,destroy:!0,paging:!1,ordering:!0,info:!1,keys:!0,searching:!0,fixedHeader:!0,scrollX:!0,autoWidth:!1,language:{search:"",searchPlaceholder:"Nach Eintrag suchen",emptyTable:"Keine Einträge vorhanden"},buttons:[{text:'<i class="las la-plus mr-2"></i>Neuer Eintrag',action:function(e,a,t,r){console.log("test")},className:"customButton mr-2"}],columns:[{data:"id",className:"bold",orderable:!0},{data:"lname",orderable:!1},{data:"fname",orderable:!1},{data:"street",orderable:!1},{data:"plz",orderable:!1},{data:"city",orderable:!1},{data:"birthday",orderable:!1},{data:"tel",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&void 0!==e?'<a href="tel:'+e+'">'+e+"</a>":'<span class="text-center">'+e+"</span>"},orderable:!1},{data:"mobile",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&void 0!==e?'<a href="tel:'+e+'">'+e+"</a>":e},orderable:!1},{data:"fax",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&void 0!==e?'<a href="fax:'+e+'">'+e+"</a>":e},orderable:!1},{data:"email",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&void 0!==e?'<a href="mailto:'+e+'">'+e+"</a>":e},orderable:!1},{data:"emailCopy",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&void 0!==e?'<a href="mailto:'+e+'">'+e+"</a>":e},orderable:!1},{data:"date1",defaultContent:"-",orderable:!0},{data:"files",defaultContent:"-",render:function(e,a,t,r){var o="";return t.signature&&(o+='<a href="'+t.signature+'" data-title="Signatur:" data-toggle="lightbox" class="mx-1"><img src="https://img.icons8.com/ios-glyphs/30/BAAC9E/signature.png"/></a>'),t.front&&(o+='<a href="'+t.front+'" data-title="Vorderseite:" data-toggle="lightbox" class="mx-1"><img src="https://img.icons8.com/ios-glyphs/30/BAAC9E/identification-documents--v1.png"/></a>'),t.back&&(o+='<a href="'+t.back+'" data-title="Rückseite:" data-toggle="lightbox" class="mx-1"><img src="https://img.icons8.com/ios-glyphs/30/BAAC9E/identification-documents--v1.png"/></a>'),o},orderable:!1}],data:t});n.columns.adjust().draw(),n.fixedHeader.adjust().draw()}),firebase.database().ref("patients").on("value",function(e){var a=snapshotToArray(e),t=$("#table2").DataTable({dom:"<'row'<'col-6 'B><'col-6'f>><'row'<'col-sm-12'tr>>",blurable:!1,destroy:!0,paging:!1,ordering:!0,info:!1,keys:!0,searching:!0,fixedHeader:!0,scrollX:!0,autoWidth:!1,language:{search:"",searchPlaceholder:"Nach Eintrag suchen",emptyTable:"Keine Einträge vorhanden"},buttons:[{text:'<i class="las la-plus mr-2"></i>Neuer Eintrag',action:function(e,a,t,r){console.log("test")},className:"customButton mr-2"},{extend:"csvHtml5",text:'<i class="las la-file-csv mr-2"></i>Für Excel Exportieren',className:"customButton mr-2"}],columns:[{data:"id",className:"bold",orderable:!0},{data:"lname",orderable:!1},{data:"fname",orderable:!1},{data:"street",orderable:!1},{data:"plz",orderable:!1},{data:"city",orderable:!1},{data:"birthday",orderable:!1},{data:"tel",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&"-"!=e?'<a href="tel:'+e+'">'+e+"</a>":'<span class="text-center">'+e+"</span>"},orderable:!1},{data:"mobile",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&"-"!=e?'<a href="tel:'+e+'">'+e+"</a>":e},orderable:!1},{data:"fax",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&"-"!=e?'<a href="fax:'+e+'">'+e+"</a>":e},orderable:!1},{data:"email",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&"-"!=e?'<a href="mailto:'+e+'">'+e+"</a>":e},orderable:!1},{data:"emailCopy",defaultContent:"-",render:function(e,a,t,r){return"display"===a&&"-"!=e?'<a href="mailto:'+e+'">'+e+"</a>":e},orderable:!1},{data:"idnumber",defaultContent:"-",orderable:!1},{data:"date1",defaultContent:"-",orderable:!0},{data:"date2",defaultContent:"-",orderable:!0},{data:"date3",defaultContent:"-",orderable:!0},{data:"files",defaultContent:"-",render:function(e,a,t,r){var o="";return t.signature&&(o+='<a href="'+t.signature+'" data-title="Signatur:" data-toggle="lightbox" class="mx-1"><img src="https://img.icons8.com/ios-glyphs/30/BAAC9E/signature.png"/></a>'),t.front&&(o+='<a href="'+t.front+'" data-title="Vorderseite:" data-toggle="lightbox" class="mx-1"><img src="https://img.icons8.com/ios-glyphs/30/BAAC9E/identification-documents--v1.png"/></a>'),t.back&&(o+='<a href="'+t.back+'" data-title="Rückseite:" data-toggle="lightbox" class="mx-1"><img src="https://img.icons8.com/ios-glyphs/30/BAAC9E/identification-documents--v1.png"/></a>'),o},orderable:!1}],data:a});t.columns.adjust().draw(),t.fixedHeader.adjust().draw()})):(firebase.auth().signOut(),window.location.href="einsendeschein.html")})});
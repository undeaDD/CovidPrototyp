<!doctype html>
<html lang="de">

<head>
	<meta charset="utf-8">
	<meta name="viewport"
		content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover, user-scalable=no, shrink-to-fit=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="true">

	<link rel="shortcut icon" type="image/x-icon"
		href="https://www.tierarztpraxis-windhaus.de/wp-content/uploads/2020/07/cropped-wt-icon-32x32.jpg">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/styles.css">
	<title>Tierarztpraxis Windhaus - Corona Test</title>
</head>

<body>

	<nav class="navbar navbar-dark" style="background-color: rgba(186,172,158,0.81);">
		<a class="navbar-brand" href="#">
			Prototyp 1.0.0
		</a>
	</nav>

	<div class="container">

		<div class="card my-3" stlye="max-width: 500px;">
			<img class="card-img-top"
				src="https://www.tierarztpraxis-windhaus.de/wp-content/uploads/2020/10/Windhaus-Coronabanner-Homepage-5000x1024-10-20-1.png">

			<div class="card-body">
				<h2 class="card-title">Online Einsendeschein</h2>

				<form autocomplete="on">

					<div class="form-row">
						<div class="form-group col">
							<label>Vorname</label>
							<input type="text" class="form-control" placeholder="Max" required>
						</div>
						<div class="form-group col">
							<label>Nachname</label>
							<input type="text" class="form-control" placeholder="Mustermann" required>
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col">
							<label>Straße, Hausnr.</label>
							<input type="text" class="form-control" placeholder="Musterstraße 1a" required>
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col-4">
							<label>PLZ</label>
							<input type="text" class="form-control" placeholder="12345" required>
						</div>
						<div class="form-group col">
							<label>Ort</label>
							<input type="text" class="form-control" placeholder="Musterstadt" required>
						</div>
					</div>

					<hr />

					<div class="form-row">
						<div class="form-group col">
							<label>Telefon</label>
							<input type="text" class="form-control" placeholder="01234 567890">
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col">
							<label>Mobil</label>
							<input type="text" class="form-control" placeholder="01234 567890">
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col">
							<label>Fax</label>
							<input type="text" class="form-control" placeholder="01234 567890">
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col">
							<label>E-Mail</label>
							<div class="input-group">
								<input type="text" class="form-control" placeholder="max.mustermann@mail.de">
								<div class="input-group-append">
									<button id="copyMailButton" class="btn btn-secondary" type="button"
										onclick="toggleCC()">+ CC</button>
								</div>
							</div>
						</div>
					</div>

					<div id="copyMail" class="form-row d-none">
						<div class="form-group col">
							<label>Kopie der E-Mail</label>
							<div class="input-group">
								<input type="text" class="form-control" placeholder="arbeitsgeber@mail.de">
							</div>
						</div>
					</div>

					<script>
						function toggleCC() {
							document.getElementById("copyMail").classList.toggle('d-none');
						}
					</script>

					<hr />

					<div class="form-row">
						<div class="form-group col">
							<label>Weitere Patienten?</label>
							<select class="form-control">
								<option>-</option>
								<option>1</option>
								<option>2</option>
								<option>3</option>
								<option>4</option>
							</select>
						</div>
					</div>

					<hr />

					<div class="form-row">
						<div class="form-check ml-1">
							<input class="form-check-input" type="checkbox" id="alternativeRechnungsAdresse">
							<label class="form-check-label" for="alternativeRechnungsAdresse">
								Abweichende Rechnungsadresse?
							</label>
						</div>
					</div>

					<hr />

					<div class="form-row">
						<div class="form-check ml-1">
							<input class="form-check-input" type="checkbox" id="datenschutz">
							<label class="form-check-label" for="datenschutz">
								Datenschutzbestimmungen akzeptieren
							</label>
							<small class="form-text text-muted">Ich erkläre hiermit mein Einverständnis zur Nutzung
								meiner Daten
								für alle an der PCR-Analyse beteiligten Personen in der Tierarztpraxis Dres. Windhaus @
								Hemme in
								Vechta.</small>
						</div>
					</div>

					<label class="mt-3">Unterschrift</label>
					<div class="form-row">
						<div class="col">
							<canvas id="sig-canvas" height="200" width="648"></canvas>
						</div>
					</div>
					<small class="form-text text-muted mb-4 mt-0" id="clearCanvas">Unterschrift zurücksetzen</small>

					<button type="submit" class="btn btn-primary">Absenden</button>

				</form>

			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

	<script>
		window.addEventListener('resize', function (e) {
			var canvas = document.getElementById("sig-canvas");
			canvas.width = canvas.offsetWidth;
		});
		var canvas = document.getElementById("sig-canvas");
		canvas.width = canvas.offsetWidth;

		(function () {
			window.requestAnimFrame = (function (callback) {
				return window.requestAnimationFrame ||
					window.webkitRequestAnimationFrame ||
					window.mozRequestAnimationFrame ||
					window.oRequestAnimationFrame ||
					window.msRequestAnimaitonFrame ||
					function (callback) {
						window.setTimeout(callback, 1000 / 60);
					};
			})();

			var canvas = document.getElementById("sig-canvas");
			var ctx = canvas.getContext("2d");
			ctx.strokeStyle = "#222222";
			ctx.lineWidth = 2;

			var drawing = false;
			var mousePos = {
				x: 0,
				y: 0
			};
			var lastPos = mousePos;

			canvas.addEventListener("mousedown", function (e) {
				drawing = true;
				lastPos = getMousePos(canvas, e);
			}, { passive: false });

			canvas.addEventListener("mouseup", function (e) {
				drawing = false;
			}, { passive: false });

			canvas.addEventListener("mousemove", function (e) {
				mousePos = getMousePos(canvas, e);
			}, { passive: false });

			// Add touch event support for mobile
			canvas.addEventListener("touchstart", function (e) {

			}, { passive: false });

			canvas.addEventListener("touchmove", function (e) {
				var touch = e.touches[0];
				var me = new MouseEvent("mousemove", {
					clientX: touch.clientX,
					clientY: touch.clientY
				});
				canvas.dispatchEvent(me);
			}, { passive: false });

			canvas.addEventListener("touchstart", function (e) {
				mousePos = getTouchPos(canvas, e);
				var touch = e.touches[0];
				var me = new MouseEvent("mousedown", {
					clientX: touch.clientX,
					clientY: touch.clientY
				});
				canvas.dispatchEvent(me);
			}, { passive: false });

			canvas.addEventListener("touchend", function (e) {
				var me = new MouseEvent("mouseup", {});
				canvas.dispatchEvent(me);
			}, { passive: false });

			function getMousePos(canvasDom, mouseEvent) {
				var rect = canvasDom.getBoundingClientRect();
				return {
					x: mouseEvent.clientX - rect.left,
					y: mouseEvent.clientY - rect.top
				}
			}

			function getTouchPos(canvasDom, touchEvent) {
				var rect = canvasDom.getBoundingClientRect();
				return {
					x: touchEvent.touches[0].clientX - rect.left,
					y: touchEvent.touches[0].clientY - rect.top
				}
			}

			function renderCanvas() {
				if (drawing) {
					ctx.moveTo(lastPos.x, lastPos.y);
					ctx.lineTo(mousePos.x, mousePos.y);
					ctx.stroke();
					lastPos = mousePos;
				}
			}

			// Prevent scrolling when touching the canvas
			document.body.addEventListener("touchstart", function (e) {
				if (e.target == canvas) {
					e.preventDefault();
				}
			}, { passive: false });
			document.body.addEventListener("touchend", function (e) {
				if (e.target == canvas) {
					e.preventDefault();
				}
			}, { passive: false });
			document.body.addEventListener("touchmove", function (e) {
				if (e.target == canvas) {
					e.preventDefault();
				}
			}, { passive: false });

			(function drawLoop() {
				requestAnimFrame(drawLoop);
				renderCanvas();
			})();

			var clearBtn = document.getElementById("clearCanvas");
			clearBtn.addEventListener("click", function(e) {
				canvas.width = canvas.width;
			});

			// Set up the UI
			var sigText = document.getElementById("sig-dataUrl");
			var sigImage = document.getElementById("sig-image");

		})();

	</script>

</body>

</html>